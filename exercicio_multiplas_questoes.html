<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exerc√≠cios JLPT N5</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      background: #f8f8f8;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 20px;
      box-shadow: 0 0 10px #ccc;
      box-sizing: border-box;
    }
    canvas {
      border: 1px solid #ccc;
      width: 100%;
      height: 200px;
      box-sizing: border-box;
      touch-action: none;
      display: block;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      box-sizing: border-box;
    }
    button {
      margin: 5px 5px 5px 0;
      padding: 8px 12px;
      font-size: 14px;
    }
    #resposta {
      display: none;
      margin-top: 15px;
      border-top: 1px dashed #aaa;
      padding-top: 10px;
      overflow-wrap: break-word;
    }
    #navegacao {
      margin-top: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h3>Exerc√≠cio <span id="numeroQuestao">1</span> de 10</h3>
    <p id="enunciado"></p>

    <div>
      <button onclick="modoCaneta()">‚úçÔ∏è Modo Caneta</button>
      <button onclick="modoTeclado()">‚å®Ô∏è Modo Teclado</button>
      <button onclick="clearCanvas()">üßΩ Limpar</button>
      <button id="toggleRespostaBtn" onclick="toggleResposta()">‚úÖ Mostrar Resposta</button>
    </div>

    <div id="canetaBox">
      <canvas id="canvas"></canvas>
    </div>

    <div id="tecladoBox" style="display:none;">
      <input type="text" id="respostaInput" placeholder="Digite sua resposta aqui...">
    </div>

    <div id="resposta">
      <strong>Resposta:</strong> <span id="textoResposta"></span>
    </div>

    <div id="navegacao">
      <button onclick="anterior()">‚¨ÖÔ∏è Anterior</button>
      <button onclick="proxima()">Pr√≥xima ‚û°Ô∏è</button>
    </div>
  </div>

  <script>
    const questoes = [
      ["Escreva a leitura em hiragana da palavra: Â≠¶Ê†°", "„Åå„Å£„Åì„ÅÜ (gakkou)"],
      ["Escreva a leitura em hiragana da palavra: Ê∞¥", "„Åø„Åö (mizu)"],
      ["Escreva a leitura em hiragana da palavra: Êó•Êú¨", "„Å´„Åª„Çì (nihon)"],
      ["Escreva a leitura em hiragana da palavra: ÈõªËªä", "„Åß„Çì„Åó„ÇÉ (densha)"],
      ["Escreva a leitura em hiragana da palavra: Â±±", "„ÇÑ„Åæ (yama)"],
      ["Escreva a leitura em hiragana da palavra: ÂÖàÁîü", "„Åõ„Çì„Åõ„ÅÑ (sensei)"],
      ["Escreva a leitura em hiragana da palavra: Êú¨", "„Åª„Çì (hon)"],
      ["Escreva a leitura em hiragana da palavra: ÁÅ´ÊõúÊó•", "„Åã„Çà„ÅÜ„Å≥ (kayoubi)"],
      ["Escreva a leitura em hiragana da palavra: È£ü„Åπ„Åæ„Åô", "„Åü„Åπ„Åæ„Åô (tabemasu)"],
      ["Escreva a leitura em hiragana da palavra: È£≤„Åø„Åæ„Åô", "„ÅÆ„Åø„Åæ„Åô (nomimasu)"],
    ];

    let indice = 0;
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let desenhando = false;
    let mostrar = false;

    function redimensionarCanvas() {
      const container = canvas.parentElement;
      canvas.width = container.offsetWidth;
      canvas.height = 200;
      clearCanvas();
    }

    function getPos(evt) {
      const rect = canvas.getBoundingClientRect();
      if (evt.touches && evt.touches.length > 0) {
        return {
          x: evt.touches[0].clientX - rect.left,
          y: evt.touches[0].clientY - rect.top
        };
      }
      return { x: evt.offsetX, y: evt.offsetY };
    }

    function iniciarDesenho(evt) {
      desenhando = true;
      const pos = getPos(evt);
      ctx.beginPath();
      ctx.moveTo(pos.x, pos.y);
      evt.preventDefault();
    }

    function desenhar(evt) {
      if (!desenhando) return;
      const pos = getPos(evt);
      ctx.lineTo(pos.x, pos.y);
      ctx.stroke();
      evt.preventDefault();
    }

    function pararDesenho() {
      desenhando = false;
    }

    canvas.addEventListener('mousedown', iniciarDesenho);
    canvas.addEventListener('mousemove', desenhar);
    canvas.addEventListener('mouseup', pararDesenho);
    canvas.addEventListener('mouseout', pararDesenho);

    canvas.addEventListener('touchstart', iniciarDesenho);
    canvas.addEventListener('touchmove', desenhar);
    canvas.addEventListener('touchend', pararDesenho);

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      document.getElementById('respostaInput').value = "";
    }

    function toggleResposta() {
      mostrar = !mostrar;
      const respostaDiv = document.getElementById('resposta');
      const toggleBtn = document.getElementById('toggleRespostaBtn');
      if (mostrar) {
        respostaDiv.style.display = 'block';
        toggleBtn.textContent = "‚ùå Ocultar Resposta";
      } else {
        respostaDiv.style.display = 'none';
        toggleBtn.textContent = "‚úÖ Mostrar Resposta";
      }
    }

    function modoTeclado() {
      document.getElementById('canetaBox').style.display = 'none';
      document.getElementById('tecladoBox').style.display = 'block';
    }

    function modoCaneta() {
      document.getElementById('canetaBox').style.display = 'block';
      document.getElementById('tecladoBox').style.display = 'none';
    }

    function carregarQuestao() {
      const [enunciado, resposta] = questoes[indice];
      document.getElementById('enunciado').textContent = enunciado;
      document.getElementById('textoResposta').textContent = resposta;
      document.getElementById('numeroQuestao').textContent = (indice + 1);
      document.getElementById('resposta').style.display = 'none';
      document.getElementById('toggleRespostaBtn').textContent = "‚úÖ Mostrar Resposta";
      mostrar = false;
      clearCanvas();
    }

    function proxima() {
      if (indice < questoes.length - 1) {
        indice++;
        carregarQuestao();
      }
    }

    function anterior() {
      if (indice > 0) {
        indice--;
        carregarQuestao();
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      redimensionarCanvas();
      modoTeclado();
      carregarQuestao();
    });

    window.addEventListener('resize', redimensionarCanvas);
  </script>
</body>
</html>
